{"ast":null,"code":"import{useEffect,useRef}from'react';import{initialUpdaterRun}from\"../animation\";import{makeMutable,startMapper,stopMapper}from\"../core\";export function useDerivedValue(processor,dependencies){var _a;var initRef=useRef(null);var inputs=Object.values((_a=processor._closure)!==null&&_a!==void 0?_a:{});if(dependencies===undefined){dependencies=[].concat(inputs,[processor.__workletHash]);}else{dependencies.push(processor.__workletHash);}if(initRef.current===null){initRef.current=makeMutable(initialUpdaterRun(processor));}var sharedValue=initRef.current;useEffect(function(){var fun=function fun(){'worklet';sharedValue.value=processor();};var mapperId=startMapper(fun,inputs,[sharedValue]);return function(){stopMapper(mapperId);};},dependencies);useEffect(function(){return function(){initRef.current=null;};},[]);return sharedValue;}","map":{"version":3,"names":["useEffect","useRef","initialUpdaterRun","makeMutable","startMapper","stopMapper","useDerivedValue","processor","dependencies","_a","initRef","inputs","Object","values","_closure","undefined","__workletHash","push","current","sharedValue","fun","value","mapperId"],"sources":["/Users/pg328/Projects/friendzone/node_modules/react-native-reanimated/lib/reanimated2/hook/useDerivedValue.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { initialUpdaterRun } from '../animation';\nimport { makeMutable, startMapper, stopMapper } from '../core';\nexport function useDerivedValue(processor, dependencies) {\n    var _a;\n    const initRef = useRef(null);\n    const inputs = Object.values((_a = processor._closure) !== null && _a !== void 0 ? _a : {});\n    // build dependencies\n    if (dependencies === undefined) {\n        dependencies = [...inputs, processor.__workletHash];\n    }\n    else {\n        dependencies.push(processor.__workletHash);\n    }\n    if (initRef.current === null) {\n        initRef.current = makeMutable(initialUpdaterRun(processor));\n    }\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const sharedValue = initRef.current;\n    useEffect(() => {\n        const fun = () => {\n            'worklet';\n            sharedValue.value = processor();\n        };\n        const mapperId = startMapper(fun, inputs, [sharedValue]);\n        return () => {\n            stopMapper(mapperId);\n        };\n    }, dependencies);\n    useEffect(() => {\n        return () => {\n            initRef.current = null;\n        };\n    }, []);\n    return sharedValue;\n}\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,OAASC,iBAAiB,oBAC1B,OAASC,WAAW,CAAEC,WAAW,CAAEC,UAAU,eAC7C,MAAO,SAASC,gBAAe,CAACC,SAAS,CAAEC,YAAY,CAAE,CACrD,GAAIC,GAAE,CACN,GAAMC,QAAO,CAAGT,MAAM,CAAC,IAAI,CAAC,CAC5B,GAAMU,OAAM,CAAGC,MAAM,CAACC,MAAM,CAAC,CAACJ,EAAE,CAAGF,SAAS,CAACO,QAAQ,IAAM,IAAI,EAAIL,EAAE,GAAK,IAAK,EAAC,CAAGA,EAAE,CAAG,CAAC,CAAC,CAAC,CAE3F,GAAID,YAAY,GAAKO,SAAS,CAAE,CAC5BP,YAAY,WAAOG,MAAM,EAAEJ,SAAS,CAACS,aAAa,EAAC,CACvD,CAAC,IACI,CACDR,YAAY,CAACS,IAAI,CAACV,SAAS,CAACS,aAAa,CAAC,CAC9C,CACA,GAAIN,OAAO,CAACQ,OAAO,GAAK,IAAI,CAAE,CAC1BR,OAAO,CAACQ,OAAO,CAAGf,WAAW,CAACD,iBAAiB,CAACK,SAAS,CAAC,CAAC,CAC/D,CAEA,GAAMY,YAAW,CAAGT,OAAO,CAACQ,OAAO,CACnClB,SAAS,CAAC,UAAM,CACZ,GAAMoB,IAAG,CAAG,QAANA,IAAG,EAAS,CACd,SAAS,CACTD,WAAW,CAACE,KAAK,CAAGd,SAAS,EAAE,CACnC,CAAC,CACD,GAAMe,SAAQ,CAAGlB,WAAW,CAACgB,GAAG,CAAET,MAAM,CAAE,CAACQ,WAAW,CAAC,CAAC,CACxD,MAAO,WAAM,CACTd,UAAU,CAACiB,QAAQ,CAAC,CACxB,CAAC,CACL,CAAC,CAAEd,YAAY,CAAC,CAChBR,SAAS,CAAC,UAAM,CACZ,MAAO,WAAM,CACTU,OAAO,CAACQ,OAAO,CAAG,IAAI,CAC1B,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CACN,MAAOC,YAAW,CACtB"},"metadata":{},"sourceType":"module"}